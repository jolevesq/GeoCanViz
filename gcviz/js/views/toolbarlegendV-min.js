(function(){define(["jquery-private","gcviz-vm-tblegend","gcviz-i18n"],function(b,d,c){var a;a=function(g){var j,f=g.toolbarlegend,e=g.mapframe.id,h="",i="";j=g.find(".gcviz-tbleg-content");i='<script id="itemsTmpl" type="text/html">';i+='<li class="gcviz-leg-li" data-bind="legendItemList: { expanded: expand }, attr { \'id\': id }">';i+='<div class="gcviz-legendHolderDiv gcviz-leg-imgholder"data-bind="if: displaychild.enable || customimage.enable"><div title="'+c.getDict("%toolbarlegend-tpexpand")+'" tabindex="0" data-bind="event: { keyup: function(data, event) { $root.toggleViewService(data, event) } }, click: function(data, event) { $root.toggleViewService(data, event) }, css: $root.determineCSS($parent, $data)"></div></div>';i+='<div class="gcviz-legendHolderDiv" data-bind="if: visibility.enable && visibility.type === 1"><input class="gcviz-leg-check" type="checkbox" title="'+c.getDict("%toolbarlegend-tpvis")+'" data-bind="event: { click: $root.changeItemsVisibility }, clickBubble: false, attr: { id: \'checkbox\' + id }, checked: visibility.initstate"/></div>';i+='<div class="gcviz-legendHolderDiv" data-bind="if: visibility.enable && visibility.type === 2"><div data-bind="LegendRadioButtons: { value: visibility.initstate, group: \'radio\' + visibility.radioid }"></div></div>';i+='<div class="gcviz-legendHolderDiv" data-bind="HorizontalSliderDijit: { widget: $root.HorizontalSlider, extent: [opacity.min, opacity.max], value: opacity.initstate, enable: opacity.enable}, if: opacity.enable"></div>';i+='<div class="gcviz-legendHolderDiv" data-bind="if: metadata.enable"><span data-bind="attr: { id: \'span\' + id }, css: $root.determineTextCSS($data)"><a class="gcviz-legendLink" target="_blank" data-bind="click: $root.openMetadata($element), attr: { href: metadata.value, title: metadata.alttext, alt: metadata.alttext }, text: label.value"></a></span></div>';i+='<div class="gcviz-legendHolderDiv" data-bind="ifnot: metadata.enable"><span data-bind="text: label.value, attr: { id: \'span\' + id }, css: $root.determineTextCSS($data)"></span></div>';i+='<div class="gcviz-legendHolderImgDiv" id="customImage" data-bind="if: customimage.enable"></span><table class="gcviz-legendTable"><tbody data-bind="foreach: $data.customimage.images"><tr><td><img class="gcviz-legendImg" data-bind="attr: { src: url, alt: label }"></img></td><td><p class="gcviz-legendImgText" data-bind="text: label"></p></td></tr></tbody></table><div data-bind="if: customimage.description !== \'\'"><span class="gcviz-legendImgDesc" data-bind="text: customimage.description"></span></div></div>';i+='<div class="gcviz-legendHolderDiv" data-bind="visible: displayfields"><div class="gcviz-legendSymbolDiv" data-bind="attr: { id: \'featureLayerSymbolFieldName\' + id }"/></div>';i+='<div class="gcviz-legendSymbolDiv" data-bind="visible: displaychild, event: { onload: $root.createSymbol($data, $element) }, attr: { id: \'featureLayerSymbol\' + graphid }"></div>';i+='<div class="gcviz-legendHolderDiv" id="childItems" data-bind="if: displaychild.enable"><ul class="gcviz-leg-ul" data-bind="template: { name: \'itemsTmpl\', foreach: $data.items }"></ul></div>';i+="</li>";i+="<\/script>";j.append(i);h+='<div data-bind="if: layersArray().length > 0"><div class="gcviz-leg-theme"><span data-bind="text: theme"></span></div></div>';h+='<div><ul class="gcviz-leg-ul" data-bind="template: { name: \'itemsTmpl\', foreach: $data.layersArray }"></ul></div>';h+='<div data-bind="if: basesArray().length > 0"><div class="gcviz-leg-theme"><span data-bind="text: base"></span><ul class="gcviz-leg-ul" data-bind="template: { name: \'itemsTmpl\', foreach: $data.basesArray }"></ul></div></div>';j.append(h);return(d.initialize(j,e,f))};return{initialize:a}})}).call(this);
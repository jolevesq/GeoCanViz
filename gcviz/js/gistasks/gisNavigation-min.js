(function(){define(["jquery-private","gcviz-gismap","esri/geometry/Point","esri/dijit/OverviewMap","esri/dijit/Scalebar"],function(e,g,f,j,c){var b,a,h,i,k,d;b=function(m,u){var r,q,t,l,o=null,s=m.vIdName,p=u.type,n=u.url,v={map:m,expandFactor:2,height:100,width:230};if(n!==""){o=g.getOverviewLayer(p,n)}if(o!==null){v.baseLayer=o}r=new j(v,document.getElementById("divOverviewMap"+s));q=new j(v,document.getElementById("ovmap"+s));t=e("#divOverviewMap"+s+"-map");t.width(230).height(100);r.resize();l=e("ovmap"+s+"-map");l.width(230).height(100);q.resize();q.hide();return[r,q]};a=function(m,o){var l,p=document.getElementById("scalebar"+m.vIdName),n={map:m,scalebarStyle:"ruler",scalebarUnit:"metric",height:25,width:200};if(o.unit===2){n.units="english"}l=new c(n,p)};h=function(p,o,m){var l,n=e.Deferred();if(window.browser!=="Explorer"||(window.browser==="Explorer"&&window.browserversion>10)){e.ajax({url:m,cache:false,data:{bbox:o+","+p+","+o+","+p},dataType:"json",success:function(q){n.resolve({nts:q.features})}})}else{l=new XDomainRequest();l.open("get",m+"&dirty="+(new Date()).getTime());l.onload=function(){var q=l.responseText;q=e.parseJSON(q);n.resolve({nts:q.features})};l.send()}return n};i=function(p,o,m){var l,n=e.Deferred();if(window.browser!=="Explorer"||(window.browser==="Explorer"&&window.browserversion>10)){e.ajax({url:m,cache:false,data:{bbox:o+","+p+","+o+","+p},dataType:"json",success:function(q){n.resolve({zone:q.features[0].properties.identifier})}})}else{l=new XDomainRequest();l.open("get",m+"&dirty="+(new Date()).getTime());l.onload=function(){var q=l.responseText;q=e.parseJSON(q);n.resolve({zone:q.features[0].properties.identifier})};l.send()}return n};k=function(p,o,m){var l,n=e.Deferred();if(window.browser!=="Explorer"||(window.browser==="Explorer"&&window.browserversion>10)){e.ajax({url:m,cache:false,data:{lat:p,lon:o},dataType:"json",success:function(q){n.resolve({altitude:q.altitude})}})}else{l=new XDomainRequest();l.open("get",m+"&dirty="+(new Date()).getTime());l.onload=function(){var q=l.responseText;q=e.parseJSON(q);n.resolve({altitude:q.altitude})};l.send()}return n};d=function(l){l.setExtent(l.vFullExtent,l.spatialReference.wkid)};return{setOverview:b,setScaleBar:a,getNTS:h,getUTMzone:i,getAltitude:k,zoomFullExtent:d}})}());
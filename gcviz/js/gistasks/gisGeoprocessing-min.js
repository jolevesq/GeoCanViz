(function(){define(["esri/config","esri/tasks/ProjectParameters","esri/tasks/DistanceParameters","esri/tasks/AreasAndLengthsParameters","esri/tasks/GeometryService","esri/SpatialReference","esri/geometry/Point","esri/geometry/Extent"],function(n,p,d,k,e,q,t,f){var l,b,s,i,m,g,a,h,j,c,o,r=new p();l=function(u){n.defaults.io.geometryService=new e(u)};b=function(u){return new q({wkid:u})};s=function(x,v,y){var u=new q({wkid:4326}),z=new t((x.xmin+x.xmax)/2,x.ymin,new q({wkid:v})),w=n.defaults.io.geometryService;r.geometries=[z];r.outSR=u;w.project(r,function(A){y(A)})};i=function(A,x,y){var z,v=new d(),u=A.length,w=n.defaults.io.geometryService;if(x==="km"){z=e.UNIT_KILOMETER}else{z=e.UNIT_STATUTE_MILE}v.distanceUnit=z;v.geometry1=A[u-1];v.geometry2=A[u-2];v.geodesic=true;w.distance(v,function(B){A[u-1].distance=Math.floor(B*100)/100;y(A,x)})};m=function(y,x,z){var u,A,v=new k(),w=n.defaults.io.geometryService;if(x==="km"){u=e.UNIT_SQUARE_KILOMETERS;A=e.UNIT_KILOMETER}else{u=e.UNIT_SQUARE_MILES;A=e.UNIT_STATUTE_MILE}v.areaUnit=u;v.lengthUnit=A;v.calculationType="preserveShape";w.simplify([y],function(B){v.polygons=B;w.areasAndLengths(v,function(C){z(v.polygons[0],C,x)})})};g=function(v,w,x){var u=n.defaults.io.geometryService;u.simplify([v],function(y){u.labelPoints(y,function(z){x(z,w)})})};a=function(E,C,z,y,u,x){var v=new q({wkid:4326}),F=new f(),D=new t(E,C,v),B=new t(z,y,v),A=[D,B],w=n.defaults.io.geometryService;r.geometries=A;r.outSR=x;w.project(r,function(G){var I=G[0],H=G[1];F=new f(I.x,I.y,H.x,H.y,x);u.setExtent(F,true)})};h=function(v,x,w){var u=n.defaults.io.geometryService;r.geometries=v;r.outSR=new q({wkid:x});u.project(r,function(A){var z=r.geometries,y=z.length;while(y--){A[y].attributes=z[y].attributes}w(A)})};j=function(x,A,y){var v,w=[],u=x.length,z=new q({wkid:4326});while(u--){v=x[u];w.push(new t(v[0],v[1],z))}h(w,A,y)};c=function(v,y,w){var x=new e(n.defaults.io.geometryService.url),u=new p();u.geometries=v;u.outSR=new q({wkid:y});x.geom=v;x.on("project-complete",function(A){var D,C=[],B=A.target.geom,z=B.length;while(z--){D={};D=B[z].attributes;D.geometry=A.geometries[z];C.push(D)}w(C.reverse())});x.project(u)};o=function(E,v,y,D,C){var w=n.defaults.io.geometryService,u=new q({wkid:4326}),z="326"+y,B=parseInt(z,10),A=new q({wkid:B}),x=new t(parseFloat(v),parseFloat(E),u);r.geometries=[x];r.outSR=A;w.project(r,function(F){D(" "+Math.round(F[0].x));C(" "+Math.round(F[0].y))})};return{setGeomServ:l,getOutSR:b,getNorthAngle:s,measureLength:i,measureArea:m,labelPoints:g,zoomLocation:a,projectPoints:h,projectCoords:j,projectGeoms:c,getUTMEastNorth:o}})}());
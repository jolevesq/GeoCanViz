(function(){define(["jquery-private","knockout","gcviz-func","gcviz-i18n","gcviz-gisdata","gcviz-gislegend"],function(b,d,h,f,c,g){var a,e;a=function(k,j){var i=function(o,n){var l=this,p=b("#btnAddCSV"+n),m=h.getElemValueVM(n,["map","map"],"js");l.mapid=n;l.tpAdd=f.getDict("%toolbardata-tpadd");l.tpDelete=f.getDict("%toolbardata-tpdelete");l.tpVisible=f.getDict("%toolbarlegend-tgvis");l.lblCSV=f.getDict("%toolbardata-lbladdcsv");l.lblErrTitle=f.getDict("%toolbardata-errtitle");l.errMsg1=f.getDict("%toolbardata-err1");l.errMsg2=f.getDict("%toolbardata-err2");l.errMsg3=f.getDict("%toolbardata-err3");l.errMsg4=f.getDict("%toolbardata-err4");l.msgIE9=f.getDict("%toolbardata-ie9");l.errMsg=d.observable();l.isErrDataOpen=d.observable();l.userArray=d.observableArray([]);l.init=function(){return{controlsDescendantBindings:true}};l.launchDialog=function(){b(document.getElementById("fileDialogData"))[0].click()};l.dialogDataClose=function(){l.isErrDataOpen(false);p.focus()};l.addClick=function(q,r){if(window.browser==="Explorer"&&window.browserversion===9){l.errMsg(l.msgIE9);l.isErrDataOpen(true)}else{l.add(q,r)}p.focus()};l.add=function(t,v){var s,r,u=v.target.files,q=u.length;while(q--){s=u[q];r=new FileReader();r.fileName=s.name;r.onload=function(){var w=h.getUUID(),x=r.fileName;c.addCSV(m,r.result,w,x).done(function(y){if(y===0){l.userArray.push({label:x,id:w})}else{l.isErrDataOpen(true);if(y===1){l.errMsg(l.errMsg1)}else{if(y===2){l.errMsg(l.errMsg2)}else{if(y===3){l.errMsg(l.errMsg3)}else{l.errMsg(l.errMsg4+y)}}}}})};r.readAsText(s)}document.getElementById("fileDialogData").value=""};l.removeClick=function(q){m.removeLayer(m.getLayer(q.id));l.userArray.remove(q);p.focus()};l.changeItemsVisibility=function(r,q){g.setLayerVisibility(m,r.id,q.target.checked);return true};l.init()};e=new i(k,j);d.applyBindings(e,k[0]);return e};return{initialize:a}})}).call(this);